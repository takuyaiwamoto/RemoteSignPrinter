# ãƒªãƒ¢ãƒ¼ãƒˆç½²åãƒ»æç”»ã‚·ã‚¹ãƒ†ãƒ  è¦ä»¶å®šç¾©æ›¸ v2.1

## 1. æ©Ÿèƒ½è¦ä»¶

### 1.1 åŸºæœ¬æ©Ÿèƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»åŒæœŸ**: é€ä¿¡å´ã§ã®æç”»ã‚’å—ä¿¡å´ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º
- **ã‚¯ãƒ­ã‚¹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡**: ç•°ãªã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é–“ã§ã®å‹•ä½œã‚’ã‚µãƒãƒ¼ãƒˆ
- **è‡ªå‹•å°åˆ·æ©Ÿèƒ½**: æç”»å®Œäº†æ™‚ã®è‡ªå‹•å°åˆ·å‡¦ç†ï¼ˆé€æ˜èƒŒæ™¯ã€èµ¤è‰²åŠé€æ˜æç”»ï¼‰
- **ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œ**: ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‹ã‚¿ãƒ¼ã§ã®è¡¨ç¤º

### 1.2 é€ä¿¡å´æ©Ÿèƒ½ï¼ˆremotesign.htmlï¼‰

#### 1.2.1 æç”»æ©Ÿèƒ½
- **ãƒã‚¦ã‚¹ãƒ»ã‚¿ãƒƒãƒæç”»**: è‡ªç”±æç”»æ©Ÿèƒ½
- **ç·šè¨­å®š**: å¤ªã•4pxã€é»’è‰²å›ºå®š
- **ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚º**: A4ï¼ˆ842Ã—595pxï¼‰ã€ãƒã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆA4ã®60%ï¼‰

#### 1.2.2 èƒŒæ™¯é¸æŠæ©Ÿèƒ½ â­ENHANCED
- **å‹•çš„èƒŒæ™¯å‚ç…§**: ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ¤œç´¢ãƒ»è¡¨ç¤º
- **å¯¾å¿œå½¢å¼**: PNG, JPG, JPEG, GIF, BMP
- **èƒŒæ™¯é¸æŠUI**: ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã¾ãŸã¯ç”»åƒã‚µãƒ ãƒã‚¤ãƒ«ä¸€è¦§
- **è‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆæ©Ÿèƒ½**: ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã«åˆã‚ã›ãŸè‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- **ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ä¿æŒ**: ç”»åƒæ¯”ç‡ã‚’ç¶­æŒã—ãªãŒã‚‰ãƒ•ã‚£ãƒƒãƒˆ
- **ç™½èƒŒæ™¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³**: èƒŒæ™¯ãªã—ãƒ¢ãƒ¼ãƒ‰ç¶™ç¶šå¯¾å¿œ

#### 1.2.3 ç”»åƒè‡ªå‹•èª¿æ•´æ©Ÿèƒ½ â­NEW
- **è‡ªå‹•ãƒªã‚µã‚¤ã‚º**: ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã«å¿œã˜ãŸç”»åƒã®è‡ªå‹•èª¿æ•´
- **ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰**:
  - `contain`: ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ä¿æŒã€å…¨ä½“è¡¨ç¤º
  - `cover`: ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ä¿æŒã€é ˜åŸŸãƒ•ãƒ«æ´»ç”¨
  - `stretch`: ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã«å®Œå…¨ä¸€è‡´ï¼ˆæ¯”ç‡ç„¡è¦–ï¼‰
- **ä¸­å¤®é…ç½®**: è‡ªå‹•ã‚»ãƒ³ã‚¿ãƒªãƒ³ã‚°
- **èƒŒæ™¯è‰²æŒ‡å®š**: ä½™ç™½éƒ¨åˆ†ã®è‰²è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: é€æ˜/ç™½ï¼‰

#### 1.2.4 ç”¨ç´™ãƒ»ãƒ“ãƒ‡ã‚ªè¨­å®š
- **ç”¨ç´™ã‚µã‚¤ã‚º**: A4ã€ãƒã‚¹ãƒˆã‚«ãƒ¼ãƒ‰é¸æŠ
- **ãƒ“ãƒ‡ã‚ªå†ç”Ÿ**: signVideo.mp4ï¼ˆ100%ã€90%ã€80%ã‚µã‚¤ã‚ºã€180åº¦å›è»¢ï¼‰

#### 1.2.5 é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«æ©Ÿèƒ½
- **Dev Toolãƒ‘ãƒãƒ«**: æŠ˜ã‚ŠãŸãŸã¿å¼é–‹ç™ºè€…è¨­å®šãƒ‘ãƒãƒ«
- **ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´**: 0.5å€ã€œ2.0å€ï¼ˆ0.1åˆ»ã¿ï¼‰
- **å›è»¢å¾…æ©Ÿæ™‚é–“èª¿æ•´**: 1ç§’ã€œ10ç§’ï¼ˆ0.5ç§’åˆ»ã¿ï¼‰
- **èƒŒæ™¯ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰é¸æŠ**: contain/cover/stretchåˆ‡ã‚Šæ›¿ãˆ â­NEW
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨­å®šé€ä¿¡**: å—ä¿¡å´ã¸ã®å³åº§åæ˜ 

#### 1.2.6 åˆ¶å¾¡æ©Ÿèƒ½
- **é€ä¿¡ãƒ»å°åˆ·**: æç”»ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã¨å°åˆ·æŒ‡ç¤º
- **ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³**: A4ï¼ˆ11ç§’ï¼‰ã€ãƒã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆ8ç§’ï¼‰
- **ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢**: æç”»ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ

### 1.3 å—ä¿¡å´æ©Ÿèƒ½ï¼ˆElectronã‚¢ãƒ—ãƒªï¼‰

#### 1.3.1 è¡¨ç¤ºæ©Ÿèƒ½
- **180åº¦å›è»¢è¡¨ç¤º**: é€ä¿¡å´æç”»ã®å›è»¢è¡¨ç¤º
- **åº§æ¨™ã‚ªãƒ•ã‚»ãƒƒãƒˆ**: å·¦ã«750pxç§»å‹•è¡¨ç¤º
- **å‹•çš„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: Dev Toolè¨­å®šã«ã‚ˆã‚‹å¯å¤‰ã‚µã‚¤ã‚º

#### 1.3.2 èƒŒæ™¯ãƒ»åŒæœŸæ©Ÿèƒ½ â­ENHANCED
- **èƒŒæ™¯åŒæœŸ**: é€ä¿¡å´èƒŒæ™¯ã®180åº¦å›è»¢è¡¨ç¤º
- **å‹•çš„èƒŒæ™¯èª­ã¿è¾¼ã¿**: ãƒ•ã‚©ãƒ«ãƒ€å†…ç”»åƒã®è‡ªå‹•å–å¾—ãƒ»è¡¨ç¤º â­NEW
- **è‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆé©ç”¨**: é€ä¿¡å´ã¨åŒã˜ãƒ•ã‚£ãƒƒãƒˆè¨­å®šã‚’é©ç”¨ â­NEW
- **ç”¨ç´™ã‚µã‚¤ã‚ºå¯¾å¿œ**: A4ï¼ˆ0.92å€/0.88å€ï¼‰ã€ãƒã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆ0.9å€ï¼‰ã‚µã‚¤ã‚ºèª¿æ•´

#### 1.3.3 å°åˆ·æ©Ÿèƒ½
- **è‡ªå‹•å°åˆ·**: Windows mspaintçµŒç”±
- **ãƒ—ãƒªãƒ³ã‚¿ãƒ¼å¯¾å¿œ**: Brother MFC-J6983CDW
- **å°åˆ·å½¢å¼**: é€æ˜èƒŒæ™¯ã€èµ¤è‰²åŠé€æ˜ç·šï¼ˆrgba(255,0,0,0.5)ï¼‰
- **åº§æ¨™åŒæœŸ**: è¡¨ç¤ºã¨åŒã˜ä½ç½®ã§å°åˆ·

#### 1.3.4 ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- **å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: å°åˆ·å¾Œ180åº¦å›è»¢
- **ç§»å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: ä¸‹æ–¹å‘ã‚¹ãƒ©ã‚¤ãƒ‰
- **å¯å¤‰å¾…æ©Ÿæ™‚é–“**: Dev Toolè¨­å®šã«ã‚ˆã‚‹èª¿æ•´å¯èƒ½
- **éŸ³å£°æ©Ÿèƒ½**: å‰Šé™¤æ¸ˆã¿

#### 1.3.5 é–‹ç™ºè€…æ©Ÿèƒ½
- **è¨­å®šå—ä¿¡**: WebSocketçµŒç”±ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨­å®šæ›´æ–°
- **ã‚­ãƒ£ãƒ³ãƒã‚¹å‹•çš„ãƒªã‚µã‚¤ã‚º**: ã‚¹ã‚±ãƒ¼ãƒ«è¨­å®šã®å³åº§åæ˜ 
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡**: å¾…æ©Ÿæ™‚é–“ã®å‹•çš„å¤‰æ›´
- **èƒŒæ™¯ãƒ•ã‚£ãƒƒãƒˆåŒæœŸ**: ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰è¨­å®šã®å—ä¿¡ãƒ»é©ç”¨ â­NEW

### 1.4 åº§æ¨™å¤‰æ›ãƒ»ä½ç½®èª¿æ•´
- **è¡¨ç¤ºå¤‰æ›**: 180åº¦å›è»¢ + 750pxå·¦ã‚ªãƒ•ã‚»ãƒƒãƒˆ
- **å°åˆ·å¤‰æ›**: è¡¨ç¤ºã¨åŒä¸€å¤‰æ›
- **å‹•çš„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: åŸºæœ¬å€ç‡Ã—Dev Toolè¨­å®šå€ç‡

## 2. æŠ€è¡“ä»•æ§˜

### 2.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: HTML5 + JavaScriptï¼ˆé€ä¿¡å´ï¼‰
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª**: Electron.jsï¼ˆå—ä¿¡å´ï¼‰  
- **é€šä¿¡**: WebSocket
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Windowså¯¾å¿œ

### 2.2 WebSocketã‚µãƒ¼ãƒãƒ¼æ¥ç¶š

#### 2.2.1 ã‚µãƒ¼ãƒãƒ¼æƒ…å ±
```javascript
const WEBSOCKET_URL = "wss://realtime-sign-server.onrender.com";
```

#### 2.2.2 æ¥ç¶šæ–¹æ³•
```javascript
// åŸºæœ¬æ¥ç¶š
let socket = new WebSocket("wss://realtime-sign-server.onrender.com");

// æ¥ç¶šã‚¤ãƒ™ãƒ³ãƒˆ
socket.onopen = () => console.log("âœ… WebSocketæ¥ç¶šå®Œäº†");
socket.onerror = e => console.error("âŒ WebSocketã‚¨ãƒ©ãƒ¼", e);
socket.onclose = () => console.warn("âš ï¸ WebSocketåˆ‡æ–­");

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡
socket.onmessage = (event) => {
  const data = JSON.parse(event.data);
  handleMessage(data);
};

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
socket.send(JSON.stringify({
  type: "messageType",
  data: "messageData"
}));
```

#### 2.2.3 ã‚µãƒ¼ãƒãƒ¼ä»•æ§˜
- **ãƒ—ãƒ­ãƒˆã‚³ãƒ«**: WSSï¼ˆWebSocket Secureï¼‰
- **ãƒ›ã‚¹ãƒˆ**: realtime-sign-server.onrender.com
- **ãƒãƒ¼ãƒˆ**: 443ï¼ˆHTTPSæ¨™æº–ï¼‰
- **åŒæ™‚æ¥ç¶š**: è¤‡æ•°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¯¾å¿œ
- **ãƒ‡ãƒ¼ã‚¿å½¢å¼**: JSON

### 2.3 é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

#### 2.3.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼
```javascript
// æç”»ãƒ‡ãƒ¼ã‚¿
{ type: "start", x: number, y: number }
{ type: "draw", x: number, y: number }
{ type: "clear" }

// èƒŒæ™¯ãƒ»è¨­å®š â­ENHANCED
{ 
  type: "background", 
  src: string,              // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã¾ãŸã¯"white"
  fitMode: string,          // "contain" | "cover" | "stretch"
  filename: string          // ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆè¡¨ç¤ºç”¨ï¼‰
}
{ type: "paperSize", size: string }
{ type: "print", paperSize: string }

// ãƒ“ãƒ‡ã‚ª
{ type: "playVideo", size: number }
{ type: "videoSize", size: number }

// é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« â­ENHANCED
{ 
  type: "devSettings", 
  canvasScale: number,      // 0.5-2.0
  rotationWaitTime: number, // 1.0-10.0
  backgroundFitMode: string // "contain" | "cover" | "stretch" â­NEW
}

// èƒŒæ™¯ä¸€è¦§å–å¾— â­NEW
{ type: "getBackgroundList" }
{ 
  type: "backgroundList", 
  images: [
    { filename: string, path: string, size: number },
    ...
  ]
}
```

### 2.4 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### 2.4.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆé€ä¿¡å´ï¼‰ â­ENHANCED
```html
<!-- ä¸»è¦æŠ€è¡“ -->
- HTML5 Canvas API
- WebSocket API  
- Touch Events
- Range Input Controls
- File System Access (ç”»åƒèª­ã¿è¾¼ã¿) â­NEW
- CSS3 Flexbox
- CSS object-fit property â­NEW
```

```javascript
// ä¸»è¦æ©Ÿèƒ½
- Real-time drawing
- WebSocket communication
- Dynamic UI controls
- Settings management
- Dynamic image loading â­NEW
- Auto-fit functionality â­NEW
```

#### 2.4.2 èƒŒæ™¯ç”»åƒå‡¦ç†ã‚·ã‚¹ãƒ†ãƒ  â­NEW
```javascript
// ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ãƒ»èª­ã¿è¾¼ã¿
const imageExtensions = ['.png', '.jpg', '.jpeg', '.gif', '.bmp'];
const backgroundFolder = './backgrounds/'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ«ãƒ€

// ç”»åƒãƒ•ã‚£ãƒƒãƒˆå‡¦ç†
function fitImageToCanvas(image, canvas, fitMode) {
  const ctx = canvas.getContext('2d');
  let drawWidth, drawHeight, offsetX, offsetY;
  
  switch(fitMode) {
    case 'contain':
      // ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ä¿æŒã€å…¨ä½“è¡¨ç¤º
      const scale = Math.min(canvas.width/image.width, canvas.height/image.height);
      drawWidth = image.width * scale;
      drawHeight = image.height * scale;
      offsetX = (canvas.width - drawWidth) / 2;
      offsetY = (canvas.height - drawHeight) / 2;
      break;
      
    case 'cover':
      // ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ä¿æŒã€é ˜åŸŸãƒ•ãƒ«æ´»ç”¨
      const scale = Math.max(canvas.width/image.width, canvas.height/image.height);
      drawWidth = image.width * scale;
      drawHeight = image.height * scale;
      offsetX = (canvas.width - drawWidth) / 2;
      offsetY = (canvas.height - drawHeight) / 2;
      break;
      
    case 'stretch':
      // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã«å®Œå…¨ä¸€è‡´
      drawWidth = canvas.width;
      drawHeight = canvas.height;
      offsetX = 0;
      offsetY = 0;
      break;
  }
  
  ctx.drawImage(image, offsetX, offsetY, drawWidth, drawHeight);
}

// å‹•çš„èƒŒæ™¯ä¸€è¦§å–å¾—
async function loadBackgroundImages() {
  const images = [];
  // ãƒ•ã‚©ãƒ«ãƒ€å†…ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢
  // ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ
  // UIã«åæ˜ 
  return images;
}
```

#### 2.4.3 Electronã‚¢ãƒ—ãƒªï¼ˆå—ä¿¡å´ï¼‰ â­ENHANCED
```json
{
  "dependencies": {
    "electron": "^32.2.6"
  },
  "main": "main.js",
  "scripts": {
    "start": "electron ."
  }
}
```

```javascript
// ä¸»è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
const { app, BrowserWindow, ipcMain } = require("electron");
const { exec } = require("child_process");
const fs = require("fs");
const path = require("path");

// ç”»åƒå‡¦ç†é–¢é€£ â­NEW
const { glob } = require("glob"); // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ç”¨
const sharp = require("sharp");   // ç”»åƒå‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

#### 2.4.4 å°åˆ·ã‚·ã‚¹ãƒ†ãƒ 
```javascript
// Windowså°åˆ·API
const printerName = "Brother MFC-J6983CDW";
const printCommand = `mspaint /pt "${filePath}" "${printerName}"`;

// ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
const powerShellCommand = `powershell -Command "Start-Process -FilePath '${filePath}' -Verb PrintTo -ArgumentList '${printerName}' -WindowStyle Hidden"`;
```

#### 2.4.5 åº§æ¨™å¤‰æ›ã‚·ã‚¹ãƒ†ãƒ  â­ENHANCED
```javascript
// ã‚­ãƒ£ãƒ³ãƒã‚¹å¤‰æ›
ctx.save();
ctx.translate(canvas.width / 2, canvas.height / 2);
ctx.rotate(Math.PI); // 180åº¦å›è»¢
ctx.translate(-canvas.width / 2, -canvas.height / 2);

// å‹•çš„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
const scaledWidth = originalWidth * SCALE_FACTOR * devCanvasScale;
const scaledHeight = originalHeight * SCALE_FACTOR * devCanvasScale;

// èƒŒæ™¯ç”»åƒè‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆ â­NEW
function drawBackgroundWithFit(image, canvas, fitMode) {
  // ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸæç”»å‡¦ç†
  const ctx = canvas.getContext('2d');
  applyImageFit(ctx, image, canvas, fitMode);
}

// åº§æ¨™ã‚ªãƒ•ã‚»ãƒƒãƒˆ
const offsetX = 750; // å—ä¿¡å´ã‹ã‚‰è¦‹ã¦å·¦ã«ç§»å‹•
```

### 2.5 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ â­ENHANCED
```
signSystem/
â”œâ”€â”€ main.js              # Electronãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹
â”œâ”€â”€ renderer.js          # å—ä¿¡å´ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ï¼ˆç”»åƒå‡¦ç†å¯¾å¿œï¼‰â­UPDATE
â”œâ”€â”€ index.html           # å—ä¿¡å´HTML
â”œâ”€â”€ remotesign.html      # é€ä¿¡å´HTMLï¼ˆç”»åƒé¸æŠUIè¿½åŠ ï¼‰â­UPDATE
â”œâ”€â”€ package.json         # ä¾å­˜é–¢ä¿‚å®šç¾©
â”œâ”€â”€ backgrounds/         # èƒŒæ™¯ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ â­NEW
â”‚   â”œâ”€â”€ back3.png       # æ—¢å­˜èƒŒæ™¯ç”»åƒ1
â”‚   â”œâ”€â”€ back2.png       # æ—¢å­˜èƒŒæ™¯ç”»åƒ2
â”‚   â”œâ”€â”€ custom1.jpg     # ã‚«ã‚¹ã‚¿ãƒ èƒŒæ™¯1
â”‚   â”œâ”€â”€ custom2.png     # ã‚«ã‚¹ã‚¿ãƒ èƒŒæ™¯2
â”‚   â””â”€â”€ ...             # ãã®ä»–ã®èƒŒæ™¯ç”»åƒ
â”œâ”€â”€ signVideo.mp4       # å†ç”Ÿå‹•ç”»
â””â”€â”€ [å‰Šé™¤] haisyutu.mp3 # éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
```

### 2.6 æ–°æ©Ÿèƒ½å®Ÿè£…è©³ç´°

#### 2.6.1 å‹•çš„èƒŒæ™¯é¸æŠUI â­NEW
```html
<div class="button-group">
  <label>èƒŒæ™¯:</label>
  <select id="backgroundSelect" onchange="setBackgroundFromSelect()">
    <option value="white">ç™½èƒŒæ™¯</option>
    <!-- å‹•çš„ã«ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿½åŠ ã•ã‚Œã‚‹ -->
  </select>
  <button onclick="refreshBackgroundList()">ğŸ”„ æ›´æ–°</button>
</div>

<div class="button-group">
  <label>ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰:</label>
  <select id="fitModeSelect" onchange="updateFitMode()">
    <option value="contain">å…¨ä½“è¡¨ç¤º</option>
    <option value="cover">é ˜åŸŸãƒ•ãƒ«æ´»ç”¨</option>
    <option value="stretch">å¼•ãä¼¸ã°ã—</option>
  </select>
</div>
```

#### 2.6.2 ç”»åƒè‡ªå‹•ãƒ•ã‚£ãƒƒãƒˆæ©Ÿèƒ½ â­NEW
```javascript
// é€ä¿¡å´
let currentFitMode = 'contain';

function setBackgroundWithFit(imagePath, fitMode) {
  const img = new Image();
  img.onload = () => {
    // ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦è‡ªå‹•èª¿æ•´
    drawImageWithFit(img, canvas, fitMode);
    
    // å—ä¿¡å´ã«é€ä¿¡
    socket.send(JSON.stringify({
      type: "background",
      src: imagePath,
      fitMode: fitMode,
      filename: getFileName(imagePath)
    }));
  };
  img.src = imagePath;
}

// å—ä¿¡å´
function handleBackgroundMessage(data) {
  if (data.src === "white") {
    backgroundImage = null;
    redrawCanvas();
  } else {
    loadImageWithFit(data.src, data.fitMode);
  }
}
```

#### 2.6.3 Dev Toolæ‹¡å¼µ â­ENHANCED
```html
<div id="devTools" style="display: none; border: 2px solid orange;">
  <h3>é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«</h3>
  <input type="range" id="canvasScale" min="0.5" max="2.0" step="0.1">
  <input type="range" id="rotationWait" min="1" max="10" step="0.5">
  
  <!-- æ–°æ©Ÿèƒ½ -->
  <div class="button-group">
    <label>èƒŒæ™¯ãƒ•ã‚£ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰:</label>
    <select id="devFitMode">
      <option value="contain">å…¨ä½“è¡¨ç¤º</option>
      <option value="cover">é ˜åŸŸãƒ•ãƒ«æ´»ç”¨</option>
      <option value="stretch">å¼•ãä¼¸ã°ã—</option>
    </select>
  </div>
  
  <button onclick="sendDevSettings()">è¨­å®šã‚’å—ä¿¡å´ã«é€ä¿¡</button>
</div>
```

### 2.7 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»äº’æ›æ€§ â­ENHANCED
- **æç”»é…å»¶**: 50msä»¥ä¸‹
- **è¨­å®šé©ç”¨**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼ˆå³åº§åæ˜ ï¼‰
- **ç”»åƒèª­ã¿è¾¼ã¿**: éåŒæœŸå‡¦ç†ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤º â­NEW
- **ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨ â­NEW
- **ãƒ•ã‚£ãƒƒãƒˆå‡¦ç†**: GPUåŠ é€Ÿå¯¾å¿œï¼ˆå¯èƒ½ãªå ´åˆï¼‰ â­NEW
- **WebSocket**: è‡ªå‹•å†æ¥ç¶šå¯¾å¿œ
- **OS**: Windows 10/11
- **ãƒ–ãƒ©ã‚¦ã‚¶**: Chrome/Edgeæ¨å¥¨
- **ãƒ—ãƒªãƒ³ã‚¿ãƒ¼**: Brother MFC-J6983CDWå°‚ç”¨

### 2.8 å¯¾å¿œç”»åƒå½¢å¼ â­NEW
- **PNG**: é€æ˜åº¦å¯¾å¿œã€é«˜å“è³ª
- **JPEG/JPG**: é«˜åœ§ç¸®ã€å†™çœŸå‘ã‘
- **GIF**: ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼ˆé™æ­¢ç”»ã¨ã—ã¦å‡¦ç†ï¼‰
- **BMP**: Windowsæ¨™æº–ã€ç„¡åœ§ç¸®
- **WebP**: é«˜åŠ¹ç‡åœ§ç¸®ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œæ™‚ï¼‰
- **æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: 10MBæ¨å¥¨
- **æ¨å¥¨è§£åƒåº¦**: 1920Ã—1080ä»¥ä¸‹

### 2.9 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»åˆ¶ç´„
- **WebSocket**: WSSæš—å·åŒ–é€šä¿¡
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹**: Electronã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å†…
- **ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã¿
- **å°åˆ·æ¨©é™**: Windowsç®¡ç†è€…æ¨©é™ä¸è¦
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«é€é

## 3. æ–°è¦é–‹ç™ºæ™‚ã®ã‚µãƒ¼ãƒãƒ¼åˆ©ç”¨æ–¹æ³•

### 3.1 æ—¢å­˜ã‚µãƒ¼ãƒãƒ¼æ¥ç¶š
```javascript
// æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ¥ç¶šæ–¹æ³•
const socket = new WebSocket("wss://realtime-sign-server.onrender.com");

// åŸºæœ¬çš„ãªæ¥ç¶šå‡¦ç†
socket.onopen = function() {
    console.log("ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šæˆåŠŸ");
    // åˆæœŸåŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å¯èƒ½
};

socket.onmessage = function(event) {
    const data = JSON.parse(event.data);
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ï¼ˆèƒŒæ™¯ç”»åƒå«ã‚€ï¼‰
};
```

### 3.2 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã®äº’æ›æ€§
- æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨åŒã˜JSONå½¢å¼ã‚’ä½¿ç”¨
- æ–°æ©Ÿèƒ½ã¯æ–°ã—ã„`type`ã§æ‹¡å¼µï¼ˆ`backgroundList`, `devSettings`æ‹¡å¼µï¼‰
- æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãªã—
- èƒŒæ™¯ç”»åƒã®`fitMode`ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `contain`ï¼‰

### 3.3 é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹
- ã‚µãƒ¼ãƒãƒ¼ã¯å…±æœ‰ãƒªã‚½ãƒ¼ã‚¹ã®ãŸã‚ã€ãƒ†ã‚¹ãƒˆæ™‚ã¯ä»–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å¹²æ¸‰ã«æ³¨æ„
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸`type`ã®é‡è¤‡ã‚’é¿ã‘ã‚‹
- å¤§é‡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã¯æ§ãˆã‚‹
- ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¯Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§ã¯ãªããƒ‘ã‚¹å‚ç…§ã‚’æ¨å¥¨

## 4. è¿½åŠ æ©Ÿèƒ½ã‚¢ã‚¤ãƒ‡ã‚¢ï¼ˆå‚è€ƒï¼‰

### 4.1 é«˜å„ªå…ˆåº¦
- **æç”»å±¥æ­´ãƒ»Undo/Redoæ©Ÿèƒ½**: Ctrl+Zã§ã®å–ã‚Šæ¶ˆã—æ©Ÿèƒ½
- **æç”»ã‚¨ãƒªã‚¢å¢ƒç•Œç·šè¡¨ç¤º**: 750pxã‚ªãƒ•ã‚»ãƒƒãƒˆå¾Œã®å®Ÿéš›ã®æç”»ç¯„å›²è¡¨ç¤º
- **ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®šç®¡ç†**: Dev Toolè¨­å®šã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿

### 4.2 ä¸­å„ªå…ˆåº¦
- **ç·šã®å¤ªã•ãƒ»è‰²é¸æŠæ©Ÿèƒ½**: ç¾åœ¨4pxé»’å›ºå®šã®æ‹¡å¼µ
- **èƒŒæ™¯ã®å›è»¢ãƒ»åè»¢æ©Ÿèƒ½**: èƒŒæ™¯ç”»åƒã®å‘ãèª¿æ•´
- **å°åˆ·ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½**: å°åˆ·å‰ã®ç¢ºèªè¡¨ç¤º

### 4.3 ä½å„ªå…ˆåº¦
- **è¤‡æ•°ãƒšãƒ¼ã‚¸å¯¾å¿œ**: é€£ç¶šæç”»ãƒ»ä¸€æ‹¬å°åˆ·
- **æç”»ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½
- **çµ±è¨ˆãƒ»ãƒ­ã‚°æ©Ÿèƒ½**: ä½¿ç”¨çŠ¶æ³ã®æŠŠæ¡