<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevTool ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #333;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    h1 {
      text-align: center;
      color: #764ba2;
      margin-bottom: 10px;
      font-size: 2.5em;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .status-bar {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    
    .status-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #ff4444;
      animation: pulse 2s infinite;
    }
    
    .status-dot.connected {
      background: #44ff44;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
    
    .control-section {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .control-section h2 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 1.5em;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    
    .control-group {
      display: grid;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .control-row {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    label {
      font-weight: 600;
      min-width: 200px;
      color: #555;
    }
    
    input[type="range"] {
      flex: 1;
      min-width: 200px;
    }
    
    .range-value {
      background: #667eea;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      min-width: 80px;
      text-align: center;
      font-weight: bold;
    }
    
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button.selected {
      background: #44ff44;
      color: #333;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      box-shadow: none;
    }
    
    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .emergency-stop {
      background: #ff4444;
      font-size: 20px;
      padding: 15px 30px;
    }
    
    .emergency-stop:hover {
      background: #ff6666;
    }
    
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
    }
    
    .info-box h3 {
      color: #1976D2;
      margin-bottom: 10px;
    }
    
    .connection-status {
      font-weight: bold;
      color: #ff4444;
    }
    
    .connection-status.connected {
      color: #44ff44;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ® DevTool ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼</h1>
    
    <div class="status-bar">
      <div class="status-indicator">
        <span class="status-dot" id="statusDot"></span>
        <span id="connectionStatus" class="connection-status">æœªæ¥ç¶š</span>
      </div>
      <div>
        <span id="connectedClients">æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: 0</span>
      </div>
    </div>
    
    <div class="info-box">
      <h3>â„¹ï¸ ç®¡ç†è€…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«</h3>
      <p>ã“ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€ã™ã¹ã¦ã®æ›¸ãæ‰‹å´ã®DevToolè¨­å®šã‚’ãƒªãƒ¢ãƒ¼ãƒˆåˆ¶å¾¡ã§ãã¾ã™ã€‚</p>
      <p>è¨­å®šå¤‰æ›´ã¯å³åº§ã«ã™ã¹ã¦ã®æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«åæ˜ ã•ã‚Œã¾ã™ã€‚</p>
    </div>
    
    <!-- ã‚­ãƒ£ãƒ³ãƒã‚¹è¨­å®š -->
    <div class="control-section">
      <h2>ğŸ“ ã‚­ãƒ£ãƒ³ãƒã‚¹è¨­å®š</h2>
      <div class="control-group">
        <div class="control-row">
          <label>ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚µã‚¤ã‚ºèª¿æ•´:</label>
          <input type="range" id="canvasScale" min="0.1" max="3.0" step="0.05" value="1.4">
          <span class="range-value" id="canvasScaleValue">1.4x</span>
        </div>
      </div>
    </div>
    
    <!-- ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨­å®š -->
    <div class="control-section">
      <h2>â±ï¸ ã‚¿ã‚¤ãƒŸãƒ³ã‚°è¨­å®š</h2>
      <div class="control-group">
        <div class="control-row">
          <label>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹å¾…æ©Ÿæ™‚é–“:</label>
          <input type="range" id="animationStartWait" min="0.1" max="10" step="0.1" value="0.1">
          <span class="range-value" id="animationStartWaitValue">0.1ç§’</span>
        </div>
        <div class="control-row">
          <label>å›è»¢å¾Œå¾…æ©Ÿæ™‚é–“:</label>
          <input type="range" id="rotationWait" min="1" max="10" step="0.5" value="1.0">
          <span class="range-value" id="rotationWaitValue">1.0ç§’</span>
        </div>
        <div class="control-row">
          <label>å°åˆ·é…å»¶æ™‚é–“:</label>
          <input type="range" id="printDelay" min="0" max="10" step="0.5" value="5.0">
          <span class="range-value" id="printDelayValue">5.0ç§’</span>
        </div>
      </div>
    </div>
    
    <!-- èƒŒæ™¯è¨­å®š -->
    <div class="control-section">
      <h2>ğŸ¨ èƒŒæ™¯è¨­å®š</h2>
      <div class="control-group">
        <div class="button-group">
          <button onclick="setBackground('./back3.png')">èƒŒæ™¯1</button>
          <button onclick="setBackground('./back2.png')">èƒŒæ™¯2</button>
          <button onclick="setBackground('./back4.png')">èƒŒæ™¯3</button>
          <button onclick="setBackground('./back6.png')">èƒŒæ™¯4</button>
          <button onclick="setBackgroundDev()" style="background: #ffc0cb; color: #333;">èƒŒæ™¯5(dev)</button>
          <button onclick="setBackground(null)">ç™½</button>
          <button onclick="setSpecialBackgroundToggle()" style="background: linear-gradient(45deg, #ff1493, #00ffff);">ğŸ¬ å‹•ç”»èƒŒæ™¯</button>
        </div>
      </div>
    </div>
    
    <!-- å‹•ç”»ãƒ»éŸ³æ¥½è¨­å®š -->
    <div class="control-section">
      <h2>ğŸµ å‹•ç”»ãƒ»éŸ³æ¥½è¨­å®š</h2>
      <div class="control-group">
        <div class="control-row">
          <label>éŸ³æ¥½ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆèƒŒæ™¯5ï¼‰:</label>
          <input type="range" id="musicVolume" min="0" max="1" step="0.05" value="0.5">
          <span class="range-value" id="musicVolumeValue">50%</span>
        </div>
        <div class="control-row">
          <label>èƒŒæ™¯5å‹•ç”»ãƒ‘ã‚¿ãƒ¼ãƒ³:</label>
          <div class="button-group">
            <button id="pattern1Btn" onclick="setVideoPattern(1)">ãƒ‘ã‚¿ãƒ¼ãƒ³1(å›è»¢)</button>
            <button id="pattern2Btn" class="selected" onclick="setVideoPattern(2)">ãƒ‘ã‚¿ãƒ¼ãƒ³2(ãƒ•ã‚§ãƒ¼ãƒ‰)</button>
          </div>
        </div>
        <div class="control-row">
          <label>ãƒ“ãƒ‡ã‚ªã‚µã‚¤ã‚º:</label>
          <div class="button-group">
            <button id="size100Btn" class="selected" onclick="setVideoSize(100)">100%</button>
            <button id="size90Btn" onclick="setVideoSize(90)">90%</button>
            <button id="size80Btn" onclick="setVideoSize(80)">80%</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š -->
    <div class="control-section">
      <h2>âœ¨ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š</h2>
      <div class="control-group">
        <div class="checkbox-group">
          <input type="checkbox" id="starEffect">
          <label for="starEffect">æ˜Ÿã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="fairyDustEffect">
          <label for="fairyDustEffect">å¦–ç²¾ã®ç²‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="heartEffect">
          <label for="heartEffect">ğŸ’– ãƒãƒ¼ãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="penSoundEffect">
          <label for="penSoundEffect">ğŸµ ãƒšãƒ³éŸ³</label>
        </div>
      </div>
      <hr style="margin: 20px 0;">
      <div class="control-group">
        <h3>é€ä¿¡å¾Œæ¼”å‡º</h3>
        <div class="checkbox-group">
          <input type="checkbox" id="fireworksEffect" checked>
          <label for="fireworksEffect">ğŸ† èŠ±ç«</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="confettiEffect" checked>
          <label for="confettiEffect">ğŸŠ ç´™å¹é›ª</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="videoPlayback" checked>
          <label for="videoPlayback">ğŸ¬ æ˜ åƒå†ç”Ÿ</label>
        </div>
      </div>
    </div>
    
    <!-- å°åˆ·è¨­å®š -->
    <div class="control-section">
      <h2>ğŸ–¨ï¸ å°åˆ·è¨­å®š</h2>
      <div class="control-group">
        <div class="control-row">
          <label>ç”¨ç´™ã‚µã‚¤ã‚º:</label>
          <div class="button-group">
            <button id="a4Btn" class="selected" onclick="setPaperSize('A4')">A4</button>
            <button id="lBtn" onclick="setPaperSize('L')">Låˆ¤</button>
            <button id="posterBtn" onclick="setPaperSize('poster')">ãƒã‚¹ãƒˆã‚«ãƒ¼ãƒ‰</button>
          </div>
        </div>
        <div class="control-row">
          <label>å°åˆ·ãƒ¢ãƒ¼ãƒ‰:</label>
          <div class="button-group">
            <button id="drawOnlyBtn" class="selected" onclick="setPrintMode('drawOnly')">æç”»ãƒ¢ãƒ¼ãƒ‰</button>
            <button id="fullModeBtn" onclick="setPrintMode('fullMode')">ãƒ•ãƒ«ãƒ¢ãƒ¼ãƒ‰</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ãƒ†ã‚¹ãƒˆãƒ»ç‰¹æ®Šæ©Ÿèƒ½ -->
    <div class="control-section">
      <h2>ğŸ§ª ãƒ†ã‚¹ãƒˆãƒ»ç‰¹æ®Šæ©Ÿèƒ½</h2>
      <div class="control-group">
        <div class="button-group">
          <button onclick="testFireworks()">ğŸ† èŠ±ç«ãƒ†ã‚¹ãƒˆ</button>
          <button onclick="testConfetti()">ğŸŠ ç´™å¹é›ªãƒ†ã‚¹ãƒˆ</button>
          <button onclick="playVideo()">ğŸ“¹ ãƒ“ãƒ‡ã‚ªå†ç”Ÿ</button>
          <button onclick="testSwitchBot()">ğŸ¤– SwitchBotãƒ†ã‚¹ãƒˆ</button>
          <button onclick="testDrawRightBottom()">åº§æ¨™ãƒ†ã‚¹ãƒˆï¼ˆå³ä¸‹ï¼‰</button>
        </div>
      </div>
      <div class="control-group">
        <div class="checkbox-group">
          <input type="checkbox" id="switchBotEffect">
          <label for="switchBotEffect">ğŸ¤– SwitchBotãƒãƒ–ãƒ«</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="backgroundDebug">
          <label for="backgroundDebug">ğŸ” èƒŒæ™¯ãƒ‡ãƒãƒƒã‚°</label>
        </div>
      </div>
    </div>
    
    <!-- åˆ¶å¾¡ãƒœã‚¿ãƒ³ -->
    <div class="control-section">
      <h2>ğŸ® åˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰</h2>
      <div class="button-group">
        <button onclick="sendAllSettings()" style="background: #4CAF50;">
          ğŸ“¤ ã™ã¹ã¦ã®è¨­å®šã‚’é€ä¿¡
        </button>
        <button onclick="refreshClients()">
          ğŸ”„ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã‚’æ›´æ–°
        </button>
        <button onclick="clearAllCanvas()" class="emergency-stop">
          ğŸš¨ å…¨ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢
        </button>
      </div>
    </div>
  </div>
  
  <script>
    // WebSocketæ¥ç¶š
    let socket = null;
    let adminId = 'admin_' + Math.random().toString(36).substr(2, 9);
    let isConnected = false;
    
    // WebSocketæ¥ç¶šã‚’åˆæœŸåŒ–
    function initWebSocket() {
      socket = new WebSocket("wss://realtime-sign-server-1.onrender.com");
      
      socket.onopen = () => {
        console.log("âœ… WebSocketæ¥ç¶šå®Œäº†ï¼ˆç®¡ç†è€…ï¼‰");
        isConnected = true;
        updateConnectionStatus(true);
        
        // ç®¡ç†è€…ã¨ã—ã¦ç™»éŒ²
        socket.send(JSON.stringify({
          type: 'admin_register',
          adminId: adminId,
          role: 'admin'
        }));
      };
      
      socket.onmessage = (event) => {
        try {
          const data = JSON.parse(event.data);
          handleMessage(data);
        } catch (error) {
          console.error('âŒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ã‚¨ãƒ©ãƒ¼:', error);
        }
      };
      
      socket.onerror = (error) => {
        console.error("âŒ WebSocketã‚¨ãƒ©ãƒ¼:", error);
      };
      
      socket.onclose = () => {
        console.log("âš ï¸ WebSocketåˆ‡æ–­");
        isConnected = false;
        updateConnectionStatus(false);
        
        // 5ç§’å¾Œã«å†æ¥ç¶šã‚’è©¦ã¿ã‚‹
        setTimeout(() => {
          console.log("ğŸ”„ å†æ¥ç¶šã‚’è©¦ã¿ã¦ã„ã¾ã™...");
          initWebSocket();
        }, 5000);
      };
    }
    
    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
    function handleMessage(data) {
      switch(data.type) {
        case 'client_count':
          updateClientCount(data.count);
          break;
        case 'admin_registered':
          console.log('âœ… ç®¡ç†è€…ã¨ã—ã¦ç™»éŒ²å®Œäº†');
          break;
        case 'setting_applied':
          console.log('âœ… è¨­å®šãŒé©ç”¨ã•ã‚Œã¾ã—ãŸ:', data.setting);
          break;
      }
    }
    
    // æ¥ç¶šçŠ¶æ…‹ã‚’æ›´æ–°
    function updateConnectionStatus(connected) {
      const statusDot = document.getElementById('statusDot');
      const connectionStatus = document.getElementById('connectionStatus');
      
      if (connected) {
        statusDot.classList.add('connected');
        connectionStatus.classList.add('connected');
        connectionStatus.textContent = 'æ¥ç¶šä¸­';
      } else {
        statusDot.classList.remove('connected');
        connectionStatus.classList.remove('connected');
        connectionStatus.textContent = 'æœªæ¥ç¶š';
      }
    }
    
    // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ•°ã‚’æ›´æ–°
    function updateClientCount(count) {
      document.getElementById('connectedClients').textContent = `æ¥ç¶šä¸­ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: ${count}`;
    }
    
    // è¨­å®šé€ä¿¡é–¢æ•°
    function sendSetting(settingType, value) {
      if (!isConnected || !socket) {
        alert('WebSocketæœªæ¥ç¶šã§ã™ã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        return;
      }
      
      const message = {
        type: 'devtool_control',
        role: 'admin',
        adminId: adminId,
        setting: settingType,
        value: value,
        fromAdmin: true, // ç®¡ç†è€…ã‹ã‚‰ã®è¨­å®šã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤º
        priority: 'high', // é«˜å„ªå…ˆåº¦è¨­å®š
        timestamp: Date.now()
      };
      
      socket.send(JSON.stringify(message));
      console.log('ğŸ“¤ è¨­å®šé€ä¿¡:', settingType, value);
    }
    
    // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼å€¤ã®æ›´æ–°ã¨é€ä¿¡
    function setupSlider(sliderId, valueId, settingType, formatter) {
      const slider = document.getElementById(sliderId);
      const valueDisplay = document.getElementById(valueId);
      
      slider.addEventListener('input', (e) => {
        const value = parseFloat(e.target.value);
        valueDisplay.textContent = formatter(value);
        sendSetting(settingType, value);
      });
    }
    
    // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®è¨­å®š
    function setupCheckbox(checkboxId, settingType) {
      const checkbox = document.getElementById(checkboxId);
      checkbox.addEventListener('change', (e) => {
        sendSetting(settingType, e.target.checked);
      });
    }
    
    // èƒŒæ™¯è¨­å®š
    function setBackground(backgroundPath) {
      sendSetting('background', backgroundPath);
    }
    
    function setBackgroundDev() {
      sendSetting('backgroundDev', true);
    }
    
    function setSpecialBackgroundToggle() {
      sendSetting('specialBackgroundToggle', true);
    }
    
    // ãƒ“ãƒ‡ã‚ªãƒ‘ã‚¿ãƒ¼ãƒ³è¨­å®š
    function setVideoPattern(pattern) {
      document.querySelectorAll('#pattern1Btn, #pattern2Btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      document.getElementById(`pattern${pattern}Btn`).classList.add('selected');
      sendSetting('videoPattern', pattern);
    }
    
    // ãƒ“ãƒ‡ã‚ªã‚µã‚¤ã‚ºè¨­å®š
    function setVideoSize(size) {
      document.querySelectorAll('#size100Btn, #size90Btn, #size80Btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      document.getElementById(`size${size}Btn`).classList.add('selected');
      sendSetting('videoSize', size);
    }
    
    // ç”¨ç´™ã‚µã‚¤ã‚ºè¨­å®š
    function setPaperSize(size) {
      document.querySelectorAll('#a4Btn, #lBtn, #posterBtn').forEach(btn => {
        btn.classList.remove('selected');
      });
      const btnMap = { 'A4': 'a4Btn', 'L': 'lBtn', 'poster': 'posterBtn' };
      document.getElementById(btnMap[size]).classList.add('selected');
      sendSetting('paperSize', size);
    }
    
    // å°åˆ·ãƒ¢ãƒ¼ãƒ‰è¨­å®š
    function setPrintMode(mode) {
      document.querySelectorAll('#drawOnlyBtn, #fullModeBtn').forEach(btn => {
        btn.classList.remove('selected');
      });
      const btnMap = { 'drawOnly': 'drawOnlyBtn', 'fullMode': 'fullModeBtn' };
      document.getElementById(btnMap[mode]).classList.add('selected');
      sendSetting('printMode', mode);
    }
    
    // ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½
    function testFireworks() {
      sendSetting('testFireworks', true);
    }
    
    function testConfetti() {
      sendSetting('testConfetti', true);
    }
    
    function playVideo() {
      sendSetting('playVideo', true);
    }
    
    function testSwitchBot() {
      sendSetting('testSwitchBot', true);
    }
    
    function testDrawRightBottom() {
      sendSetting('testDrawRightBottom', true);
    }
    
    // ã™ã¹ã¦ã®è¨­å®šã‚’é€ä¿¡
    function sendAllSettings() {
      // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤ã‚’é€ä¿¡
      const sliders = [
        { id: 'canvasScale', type: 'canvasScale' },
        { id: 'animationStartWait', type: 'animationStartWait' },
        { id: 'rotationWait', type: 'rotationWait' },
        { id: 'musicVolume', type: 'musicVolume' },
        { id: 'printDelay', type: 'printDelay' }
      ];
      
      sliders.forEach(slider => {
        const value = parseFloat(document.getElementById(slider.id).value);
        sendSetting(slider.type, value);
      });
      
      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®å€¤ã‚’é€ä¿¡
      const checkboxes = [
        'starEffect', 'fairyDustEffect', 'heartEffect', 'penSoundEffect',
        'fireworksEffect', 'confettiEffect', 'videoPlayback',
        'switchBotEffect', 'backgroundDebug'
      ];
      
      checkboxes.forEach(id => {
        const checked = document.getElementById(id).checked;
        sendSetting(id, checked);
      });
      
      alert('ã™ã¹ã¦ã®è¨­å®šã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    }
    
    // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã‚’æ›´æ–°
    function refreshClients() {
      sendSetting('refreshClients', true);
    }
    
    // å…¨ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚¯ãƒªã‚¢
    function clearAllCanvas() {
      if (confirm('æœ¬å½“ã«ã™ã¹ã¦ã®ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
        sendSetting('clearAllCanvas', true);
      }
    }
    
    // åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', () => {
      // WebSocketæ¥ç¶š
      initWebSocket();
      
      // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®è¨­å®š
      setupSlider('canvasScale', 'canvasScaleValue', 'canvasScale', v => `${v}x`);
      setupSlider('animationStartWait', 'animationStartWaitValue', 'animationStartWait', v => `${v}ç§’`);
      setupSlider('rotationWait', 'rotationWaitValue', 'rotationWait', v => `${v}ç§’`);
      setupSlider('musicVolume', 'musicVolumeValue', 'musicVolume', v => `${Math.round(v * 100)}%`);
      setupSlider('printDelay', 'printDelayValue', 'printDelay', v => `${v}ç§’`);
      
      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®è¨­å®š
      const checkboxSettings = [
        'starEffect', 'fairyDustEffect', 'heartEffect', 'penSoundEffect',
        'fireworksEffect', 'confettiEffect', 'videoPlayback',
        'switchBotEffect', 'backgroundDebug'
      ];
      
      checkboxSettings.forEach(id => {
        setupCheckbox(id, id);
      });
      
      console.log('ğŸ® DevTool ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼åˆæœŸåŒ–å®Œäº†');
    });
  </script>
</body>
</html>